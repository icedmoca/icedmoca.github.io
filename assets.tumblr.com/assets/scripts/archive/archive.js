"undefined"!=typeof Tumblr||(Tumblr={}),/*! scripts/application/glass.js */
function(t,i){var s=new(Backbone.View.extend({id:"glass_overlay",events:{click:"click"},locked:!1,visible:!1,initialize:function(){},render:function(){t(document.body).prepend(this.$el),this.rendered=!0,Tumblr.Events.on("DOMEventor:escape",_.bind(this.keydown,this))},click:function(){this.locked||this.hide()},keydown:function(t){this.locked||this.visible&&this.hide()},show:function(t,i){_.isObject(Tumblr.KeyCommands)&&!Tumblr.KeyCommands.suspended&&(Tumblr.KeyCommands.suspend(),this.glass_suspended_keys=!0),this.rendered||this.render(),i=i||"",this.on_close=t||function(){},this.visible=!0,Tumblr.Events.trigger("Glass:show",this),this.$el.addClass("show"),setTimeout(_.bind(function(){this.$el.addClass(i)},this),0)},hide:function(){this.visible=!1,Tumblr.Events.trigger("Glass:hide",this),this.$el.removeClass("show"),this.on_close(),this.glass_suspended_keys&&(_.isObject(Tumblr.KeyCommands)&&Tumblr.KeyCommands.resume(),this.glass_suspended_keys=!1)},lock:function(){this.locked=!0},unlock:function(){this.locked=!1}}));i.Glass=s}(jQuery,Tumblr),/*! scripts/application/popover.js */
function(t,i){"use strict";var s=Backbone.View.extend({events:{click:"click"},initialize:function(i){this.button=t(i.el||this.$el),this.popover=i.popover||this.$el.find(".popover"),this.on_hide=i.on_hide||function(){},this.on_show=i.on_show||function(){},this.auto_show=i.auto_show||!1,this.prevent_default_click=i.prevent_default_click||!1,this.auto_show&&this.show(),s.register(this)},click:function(t){this.prevent_default_click&&t.preventDefault(),this.toggle()},is_showing:!1,show:function(){Tumblr.Glass.show(_.bind(function(){this.hide(),this.on_hide()},this)),this.popover.show(),this.on_show(),this.is_showing=!0},hide:function(){this.is_showing&&(Tumblr.Glass.on_close=_.bind(function(){this.is_showing&&(this.popover.hide(),this.on_hide())},this),Tumblr.Glass.hide(),this.is_showing=!1)},toggle:function(){return this.is_showing?this.hide():this.show()}});s.instances=[],s.register=function(t){this.instances.push(t)},s.hide_all=function(){for(var t=0;t<this.instances.length;t++)this.instances[t].hide()},s.hide_all_after=function(t){t=t?t:100,setTimeout(_.bind(function(){for(var t=0;t<this.instances.length;t++)this.instances[t].hide()},this),t)};var e=s.extend({initialize:function(t){if(Tumblr.BasePopover.prototype.initialize.apply(this,arguments),this.skip_glass=t.skip_glass||!1,this.skip_offset=t.skip_offset||!1,this.direction=t.direction||"down",this.align=t.align||"left",this.glassless=t.glassless||!1,this.glassless){this.skip_glass=!0,this.glassless_options=t.glassless_options||{};var i={prevent_clicks:!0,click_root:!1};_.defaults(this.glassless_options,i),this.on("click:outside",this.__onClickOutside,this),this.on("click:inside",this.__onClickInside,this)}this.options=t||{},this.options.left=t.left||0,this.options.right=t.right||0,this.options.top=t.top||0,this.options.bottom=t.bottom||0},click:function(t){this.options.prevent_default_click&&t.preventDefault(),this.options.disable_auto_show||this.show()},__bindOutsideClick:function(){this.__outsideClickFn=_.bind(this.__onOutsideClick,this),document.addEventListener("click",this.__outsideClickFn,!0),this.listenToOnce(Tumblr.Events,"popover:hide",function(){document.removeEventListener("click",this.__outsideClickFn,!0),this.__outsideClickFn=null})},__onOutsideClick:function(i){var s=this.glassless_options,e=!1,o=function(t){return t.jquery&&(t=t[0]),!(!t||!t.nodeType)&&t},n=[".ui_dialog"];n.push(this.popover),s.click_root&&(_.isArray(s.click_root)?n.concat(s.click_root):n.push(s.click_root)),s.dynamic_ignore_selectors&&(_.isArray(s.dynamic_ignore_selectors)?_.each(s.dynamic_ignore_selectors,function(i){n.push(t(i))}):n.push(t(s.dynamic_ignore_selectors))),_.each(n,_.bind(function(s){var n=o(s);!n&&_.isString(s)&&(n=t(s).get(0)),n&&(i.target===n||t.contains(n,i.target))&&(e=!0)},this)),e?this.trigger("click:inside"):(this.glassless_options.prevent_clicks&&(i.preventDefault(),i.stopPropagation()),this.trigger("click:outside"))},__onClickOutside:function(){this.is_showing&&this.hide()},__onClickInside:function(){},show:function(){if(this.skip_glass||Tumblr.Glass.show(_.bind(function(){this.hide(),this.on_hide()},this)),!this.$el.is(this.popover.parent())){var t={top:0,left:0},i={};this.skip_offset||(t=this.button.position()),"up"!==this.direction?i.top=this.options.top+t.top+"px":i.bottom=this.options.bottom-t.top-this.button.height()+"px","right"!==this.align?i.left=this.options.left+t.left+"px":i.right=this.options.right-t.left-this.button.width()+"px",this.popover.css(i)}this.popover.show(),this.on_show(),this.is_showing=!0,Tumblr.Events.trigger("popover:show",this),this.glassless&&!this.__outsideClickFn&&this.__bindOutsideClick()},hide:function(){this.is_showing&&(this.skip_glass?this.popover.hide():(Tumblr.Glass.on_close=_.bind(function(){this.is_showing&&this.popover.hide()},this),Tumblr.Glass.hide()),this.on_hide(),this.is_showing=!1,Tumblr.Events.trigger("popover:hide"))},position:function(){this.popover.show();var i=t(window),s={top:i.scrollTop(),left:i.scrollLeft()};this.popover.removeClass("up nipple_on_bottom"),s.right=s.left+i.width(),s.bottom=s.top+i.height();var e=this.popover.offset(),o=this.popover.outerHeight(),n=i.height();e.right=e.left+this.popover.outerWidth(),e.bottom=e.top+o,n>o&&s.bottom<e.bottom&&this.popover.addClass("up nipple_on_bottom")}});i.BasePopover=s,i.Popover=e}(jQuery,Tumblr),/*! scripts/loader.js */
function(t,i,s){function e(t){return this.start?(this.created=!1,this.opts=this.opts||{},void i.extend(this.opts,e.defaults,o,t)):new e(t)}var o={zIndex:2e9,color:"inherit",top:"50%",left:"50%",position:"absolute",className:"leviathan"};e.defaults={},e.prototype={start:function(i){return"object"!=typeof i&&(i=!1),i&&i instanceof jQuery&&(i=i[0]),!(!this.created&&!i)&&(i||(i=this.$target[0]),this.destroy(),this.uid=this._uid(),this.$target=t(i),this.$target.data("loader-uid",this.uid),this.el=this._html(),this.$target.append(this.el),this.$loader=t("#loader_"+this.uid),this._init(),this)},stop:function(){return"undefined"!=typeof this.$loader&&(this.$loader.hide(),this.$loader.removeClass("animate")),this},destroy:function(){return this.stop(),"undefined"!=typeof this.$loader&&this.$loader.remove(),"undefined"!=typeof this.$target&&this.$target.removeData("loader-uid"),this},_init:function(){this.created=!0,"auto"!==this.opts.color&&t(".Knight-Rider-bar",this.$loader).css("background-color",this.opts.color),this.$loader.css("position",this.opts.position),this.$loader.css("z-index",this.opts.zIndex),this.$loader.css("top",this.opts.top),this.$loader.css("left",this.opts.left),this.$loader.show()},_uid:function(){return Math.floor(1e7*Math.random())},_html:function(){return'<div id="loader_'+this.uid+'" class="Knight-Rider-loader centered animate '+this.opts.className+'"><div class="Knight-Rider-bar"></div><div class="Knight-Rider-bar"></div><div class="Knight-Rider-bar"></div></div>'}},s.Loader=e}(jQuery,_,Tumblr);/*! scripts/archive/archive_view.js */
var Tumblr=Tumblr||{};!function(t,i){var s=Backbone.View.extend({el:"body",events:{"click #jump_to_month":"onMonthSelectorClick","click .year_navigation a":"onYearNavigationClick"},initialize:function(i){this.loading=!0,this.current_month=0,this.month_selector_label="Month",this.loaded_url="",this.columnWidth=150,this.gutterWidth=10,this.loader=new Tumblr.Loader({color:"#D9D9D9",position:"absolute",top:"100%"}),this.container=t(".l-content"),this.month_selector=t("#jump_to_month .month"),this.months_popover=new Tumblr.Popover({el:t("#jump_to_month"),popover:t("#browse_months_widget"),left:0,top:33}),t(window).one("load",_.bind(this.onFirstWindowLoad,this)),t(window).on("load",_.bind(this.onWindowLoad,this)),t(window).on("ghostscroll",_.bind(this.onWindowScroll,this)),t(window).on("ghostbeforeresize",_.bind(this.onWindowResize,this)),t(window).on("ghostafterresize",_.bind(this.onAfterResize,this)),function(){function i(){function t(){a=Math.floor(Math.random()*Math.pow(10,6)),e.addClass(o),setTimeout(r,60),s.one("scroll",h),s.on("scroll."+a,_.debounce(n,80))}function n(){c=!1,e.removeClass(o),s.off("scroll."+a),i()}function h(){c=!0}function r(){c||n()}var a,c;s.one("scroll",t)}var s=t(window),e=t(".l-content"),o="no-pointer-events";s.load(function(){setTimeout(i,2e3)})}(),this.loader.start(this.container),this.__cache={cols:0,containerHeight:t(this.container).height(),windowHeight:t(window).height(),heading:[],currentMonth:""}},loadPosts:function(){t("a#next_page_link").length<1||t("a#next_page_link").attr("href")===this.loaded_url||(this.loading=!0,this.loader.start(this.container),this.loaded_url=t("a#next_page_link").attr("href"),t.ajax({url:this.loaded_url,type:"GET",success:_.bind(function(i){var s=t(t.trim(i)),e=s.filter(".l-content"),o=s.filter("#pagination"),n=s.filter("script:contains(impixu)");new Function(n.text())(),t("#pagination").html(o.html()),this.addPosts(e),this.trackAjaxCalls(this.loaded_url)},this),error:function(){Tumblr.Dialog.alert("Sorry, something went wrong.")}}))},trackAjaxCalls:function(t){var i=document.createElement("a");!function(){var s=document.getElementById("ga_target");if(!s)return!0;i.href=t,t=i.href;var e="unknown_archive_route";i.pathname.match(/^\/archive/)&&(e="/archive"),i.pathname.match(/^\/archive\/\d{4}\/\d+/)&&(e="/archive/:year/:month");try{var o=!0;s.contentWindow.postMessage(["tick_google_analytics",o,t,e].join(";"),s.src.split("/analytics.html")[0]),"undefined"!=typeof COMSCORE&&s.contentWindow.postMessage("tick_comscore;"+t,s.src.split("/analytics.html")[0])}catch(n){}return!0}(),function(){return!0}()},addPosts:function(i){var s=[];t(i).children().each(t.proxy(function(i,e){var o=e.id;if(t(e).children(".post").each(function(){s.push(this.getAttribute("data-id"))}),o&&this.container.find("#"+o).length>0){var n=t(e).children();t("#"+o).append(n).masonry("appended",n)}else{var h=t.trim(t(".date",e).text()),r=_.find(this.__cache.heading,function(t){return t.month===h});if(r)return;this.container.append(t(e)),this.__cache.heading.push({top:t(e).offset().top-120,month:t(e).text()}),_.sortBy(this.__cache.heading,function(t){return t.top})}},this)),this.updateLikeButtons(s),this.onWindowLoad()},updateLikeButtons:function(t){},updateLayout:function(){t(".posts:not(.masonry)").masonry({itemSelector:".post",gutterWidth:this.gutterWidth,columnWidth:this.columnWidth,ghoster:{}})},onAfterResize:function(i){this.__cache.windowHeight=t(window).height(),this.__cache.containerHeight=t(this.container).outerHeight(!0)},resizeContainer:function(t){var i=this.columnWidth+this.gutterWidth,s=this.container.parent().width(),e=Math.floor(s/i);this.__cache.cols!==e&&this.container.width(e*i)},onMonthSelectorClick:function(t){t.preventDefault(),this.months_popover.show()},onYearNavigationClick:function(i){i.preventDefault();var s=t(i.currentTarget),e=s.closest(".year");s.hasClass("next_year")&&e.prev().length>0?(e.hide(),e.prev().show()):s.hasClass("previous_year")&&e.next().length>0&&(e.hide(),e.next().show())},onBackToTopClick:function(i){i.preventDefault(),t("body,html").animate({scrollTop:0},200,_.bind(this.onWindowScroll,this))},onFirstWindowLoad:function(t){this.container.children("section, header").show()},onWindowLoad:function(){this.loading=!1,this.loader.stop(),t(".loading").removeClass("loading"),this.resizeContainer(),this.updateLayout();var i=t("header.heading .date");this.__cache.heading=this.__cache.heading.concat(_.map(i,function(i){var s=t(i);return{top:s.offset().top-120,month:s.text()}})),_.sortBy(this.__cache.heading,function(t){return t.top}),this.__cache.containerHeight=t(this.container).outerHeight(!0),this.__cache.windowHeight=t(window).height(),this.__cache.containerHeight<this.__cache.windowHeight&&this.loadPosts()},onWindowResize:function(t,i){this.resizeContainer(i)},onWindowScroll:function(t,i){for(var s=i.scrollTop||0,e=i.windowHeight||0,o=this.__cache.containerHeight,n=o-2*e,h=this.__cache.heading.length-1;h>=0;h--)if(s>this.__cache.heading[h].top){this.__cache.currentMonth==this.__cache.heading[h].month||(this.__cache.currentMonth=this.__cache.heading[h].month,this.month_selector.text(this.__cache.currentMonth));break}this.loading||s>=n&&this.loadPosts()}});t(function(){new s})}(jQuery,Tumblr);